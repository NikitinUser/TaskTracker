(function(){"use strict";var t={8018:function(t,e,a){var s=a(6369),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container bg-dark-theme",attrs:{id:"app"}},[e("div",{staticClass:"row justify-content-center bg-dark-theme"},[e("div",{staticClass:"col-md-9 bg-dark-theme"},[e("div",{staticClass:"card-body task-input",attrs:{id:""}},["done"!=this.currentRoute&&"archive"!=this.currentRoute?e("TaskInput"):t._e(),e("ul",{staticClass:"list-group list-group-flush bg-dark-tasks-theme",attrs:{id:"task-list"}},t._l(t.tasks,(function(t){return e("li",{key:t.id,staticClass:"list-group-item list-group-item-darktheme border border-dark"},[e("TaskItem",{attrs:{task:t.task,priority:t.priority,type:t.type,date:t.date,id:t.id,theme:t.theme}})],1)})),0),e("LoadingSpinner",{directives:[{name:"show",rawName:"v-show",value:t.showLoadingSpinner,expression:"showLoadingSpinner"}]}),e("datalist",{attrs:{id:"suggestions-themes"}},t._l(t.suggestionsThemes,(function(a){return e("option",{key:a.theme},[t._v(" "+t._s(a.theme??"Без темы")+" ")])})),0)],1)])])])},n=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"input-group mb-3 bg-dark-theme",attrs:{id:"task-input"}},[e("input",{staticClass:"form-control bg-dark-theme",attrs:{type:"text",name:"newTask",id:"newTask",placeholder:"Задача",size:"100"},domProps:{value:t.task},on:{input:t.inputTask}}),e("span",{staticClass:"input-group-append"},[e("select",{staticClass:"form-select",attrs:{name:"priorityTask",id:"priorityTask"},domProps:{value:t.priority},on:{change:t.selectPriority}},[e("option",{attrs:{value:"0"}},[t._v("Low")]),e("option",{attrs:{value:"1"}},[t._v("Middle")]),e("option",{attrs:{value:"2"}},[t._v("High")])])]),e("span",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-secondary",attrs:{id:"add_task_btn",type:"button"},on:{click:function(e){return t.addTask()}}},[e("i",{staticClass:"fa fa-plus"})])])])},r=[],l=(a(2801),{name:"TaskInput",data(){return{task:"",priority:0,type:"",date:"",token:document.querySelector("meta[name=csrf-token").getAttribute("content")}},methods:{inputTask(t){this.task=t.target.value},selectPriority(t){this.priority=t.target.value},addTask(){if(this.date=this.getDateTime(),this.type=window.location.href.split("/")[3],"demo"==this.type)this.saveTaskToLocalStorage();else{let t=0;"bookmarks"==this.type&&(t=3);let e="task="+this.task+"&date="+this.date+"&priority="+this.priority+"&type="+t;console.log(e),this.saveTaskOnServer(e)}this.cleanInput()},getDateTime(){let t=new Date,e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear(),i=t.getHours(),n=t.getMinutes(),o=t.getSeconds();return e+"-"+a+"-"+s+" "+i+":"+n+":"+o},saveTaskToLocalStorage(){let t=localStorage.getItem("tasks");if(null==t)t=[];else try{t=JSON.parse(t)}catch(a){t=[]}let e={id:t.length+1+Math.round((new Date).getTime()/1e3),task:this.task,priority:this.priority,type:this.type,date:this.date};t.push(e),this.$parent.tasks=t,t=JSON.stringify(t),localStorage.setItem("tasks",t)},saveTaskOnServer(t){var e=this.$parent;e.showLoadingSpinner=!0;try{fetch("addTask",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded","X-CSRF-TOKEN":this.token}),body:t}).then((t=>t.json())).then((t=>{if(e.showLoadingSpinner=!1,null!=t?.errors)return alert(t.errors?.task),!1;if(null==t.id)alert("Количество задач в этом списке стало равным 50. Это количество нельзя превышать, займись делом.");else{let e={};e.id=t.id,e.date=t.date,e.task=this.b64DecodeUnicode(t.task),e.priority=t.priorityTask,e.type=t.type,this.$parent.tasks.push(e)}}))}catch(a){console.log(a),e.showLoadingSpinner=!1}},cleanInput(){this.task="",this.priority=0,this.date="",this.type=""},b64DecodeUnicode(t){return decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}}}),c=l,d=a(1001),h=(0,d.Z)(c,o,r,!1,null,"96e5ff7e",null),u=h.exports,p=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"min-height":"200px"},attrs:{id:t.id}},[e("div",[e("div",{staticClass:"d-flex flex-row mb-3",staticStyle:{"min-height":"150px"}},[e("div",{staticClass:"text-white d-flex flex-column",staticStyle:{"max-width":"20%"}},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"task-theme",attrs:{id:t.id}},[t._v(" "+t._s(t.theme??"Без темы")+" ")])]),e("div",{staticClass:"mb-3 d-flex flex-column"},[e("em",{staticClass:"li-date",staticStyle:{"font-size":"small"}},[t._v(" "+t._s(t.date.split(" ")[0])+" ")]),e("em",{staticClass:"li-date-time",staticStyle:{"font-size":"small"}},[t._v(" "+t._s(t.date.split(" ")[1])+" ")])]),e("div",[e("button",{staticClass:"btn btn-outline-light btn-sm li-btn-hid",attrs:{type:"button"},on:{click:function(e){t.visibleTask=!t.visibleTask}}},[t._v(" "+t._s(t.visibleTask?"Скрыть":"Показать")+" ")])])]),e("div",{staticClass:"text-white d-flex justify-content-center w-100 ms-3 me-1"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.visibleTask,expression:"visibleTask"}],staticClass:"li-text-task",attrs:{id:t.id}},[t._v(" "+t._s(t.task)+" "),0==t.priority?e("i",{staticClass:"li-i-priority ms-1"}):1==t.priority?e("i",{staticClass:"li-i-priority ms-1 fa fa-exclamation-circle text-warning"}):2==t.priority?e("i",{staticClass:"li-i-priority ms-1 fa fa-exclamation-circle text-danger"}):t._e()]),e("input",{staticClass:"li-priority-id",attrs:{id:t.id,type:"hidden"},domProps:{value:t.priority}})])]),"demo"==t.currentRoute?e("div",{staticClass:"text-white d-flex flex-row pull-right"},[e("TaskActionButton",{attrs:{buttonIcon:"fa fa-check-square li-i-main-action",buttonClass:"pull-right btn btn-outline-success w-100 li-main-action",action:"removeTaskFromLocal",idTask:t.id}})],1):e("div",{staticClass:"text-white d-flex flex-row pull-right"},["done"!=t.currentRoute?e("TaskActionButton",{attrs:{buttonIcon:"fa fa-check-square li-i-main-action",buttonClass:"pull-right btn btn-outline-success w-100 li-main-action",action:"swapTaskToDone",idTask:t.id}}):e("TaskActionButton",{attrs:{buttonIcon:"fa fa-trash",buttonClass:"pull-right btn btn-outline-danger w-100 li-main-action",action:"deleteTask",idTask:t.id}}),e("TaskActionButton",{attrs:{buttonIcon:"fa fa-location-arrow",buttonClass:"pull-right btn btn-outline-success w-100 li-move-tasks",action:"swapTaskToTasks",idTask:t.id}}),e("TaskActionButton",{attrs:{buttonIcon:"fa fa-bookmark",buttonClass:"pull-right btn btn-outline-primary w-100 li-move-bookmarks",action:"swapTaskToBookmarks",idTask:t.id}}),e("TaskActionButton",{attrs:{buttonIcon:"fa fa-archive",buttonClass:"pull-right btn btn-outline-info w-100 li-move-archive",action:"swapTaskToArchive",idTask:t.id}}),e("TaskActionButton",{attrs:{buttonIcon:"fa fa-pencil-square",buttonClass:"pull-right btn btn-outline-warning w-100 li-edit-action",action:"editTask",idTask:t.id}})],1)]),e("div",{staticClass:"justify-content-center pt-5",staticStyle:{display:"none"},attrs:{id:"recoveryTask"}},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.recoverTask}},[t._v(" Восстановить ")])]),e("TaskEditModal",{directives:[{name:"show",rawName:"v-show",value:t.visibleModalChange,expression:"visibleModalChange"}],attrs:{id:t.id,priority:t.priority,task:t.task,theme:t.theme}})],1)},k=[],m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"me-2"},[e("button",{class:t.buttonClass,attrs:{id:t.idTask},on:{click:t.taskBtnAction}},[e("i",{class:t.buttonIcon})])])},g=[],v={name:"TaskActionButton",props:["buttonClass","buttonIcon","action","idTask"],data(){return{token:document.querySelector("meta[name=csrf-token").getAttribute("content")}},methods:{taskBtnAction(){"removeTaskFromLocal"==this.action?this.removeTaskFromLocal():"swapTaskToDone"==this.action?this.taskSwapType(1):"deleteTask"==this.action?this.deleteTask():"swapTaskToTasks"==this.action?this.taskSwapType(0):"swapTaskToBookmarks"==this.action?this.taskSwapType(3):"swapTaskToArchive"==this.action?this.taskSwapType(2):"editTask"==this.action&&(this.$parent.visibleModalChange=!0)},removeTaskFromLocal(){let t=localStorage.getItem("tasks");if(null==t)t=[];else try{t=JSON.parse(t)}catch(a){t=[]}let e=[];for(let s=0;s<t.length;s++)t[s].id!=this.idTask&&e.push(t[s]);this.$parent.$parent.tasks=e,t=JSON.stringify(e),localStorage.setItem("tasks",t)},taskSwapType(t){var e=this.$parent.$parent;e.showLoadingSpinner=!0;let a=this.getDateTime(),s="id="+this.idTask+"&date="+a+"&type="+t;try{fetch("taskSwapType",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded","X-CSRF-TOKEN":this.token}),body:s}).then((t=>t.json())).then((t=>{if(e.showLoadingSpinner=!1,null!=t?.errors)return alert(t.errors?.task),!1;1==Number(t)?this.$parent.$el.parentNode.removeChild(this.$parent.$el):alert("Ошибка")}))}catch(i){console.log(i),e.showLoadingSpinner=!1}},deleteTask(){var t=this.$parent.$parent;t.showLoadingSpinner=!0;var e="id="+this.idTask;try{fetch("deleteTask",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded","X-CSRF-TOKEN":this.token}),body:e}).then((t=>t.json())).then((e=>{if(t.showLoadingSpinner=!1,null!=e?.errors)return alert(e.errors?.task),!1;1==Number(e)&&(this.$parent.$el.removeChild(this.$parent.$el.children[0]),this.$parent.$el.children[0].style.display="flex")}))}catch(a){t.showLoadingSpinner=!1}},getDateTime(){let t=new Date,e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear(),i=t.getHours(),n=t.getMinutes(),o=t.getSeconds();return e+"-"+a+"-"+s+" "+i+":"+n+":"+o}}},f=v,T=(0,d.Z)(f,m,g,!1,null,null,null),b=T.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-mask",attrs:{tabindex:"-1"}},[e("div",{staticClass:"modal-wrapper text-white"},[e("div",[t._m(0),e("div",{staticClass:"modal-body bg-dark-theme"},[e("div",{staticClass:"mb-2"},[e("label",[t._v("Текст:")]),e("textarea",{staticClass:"form-control",attrs:{rows:"3"},domProps:{value:t.task},on:{input:t.changeTaskText}})]),e("div",{staticClass:"mb-2"},[e("label",[t._v("Приоритетность:")]),e("select",{staticClass:"form-select",domProps:{value:t.priority},on:{change:t.changePriority}},[e("option",{attrs:{value:"0"}},[t._v(" Low ")]),e("option",{attrs:{value:"1"}},[t._v(" Middle")]),e("option",{attrs:{value:"2"}},[t._v(" High")])])]),e("div",{staticClass:"mb-2"},[e("label",[t._v("Тема задачи:")]),e("input",{staticClass:"form-control",attrs:{type:"text",name:"theme",list:"suggestions-themes"},domProps:{value:t.theme},on:{input:t.changeTheme}})])]),e("div",{staticClass:"modal-footer bg-dark-theme"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.hideModal}},[t._v("Закрыть")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.changeTask}},[t._v("Сохранить")])])])])])},w=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header bg-dark-theme"},[e("h5",{staticClass:"modal-title"},[t._v("Редактирование")])])}],C={name:"TaskEditModal",props:["task","priority","id","theme"],data(){return{token:document.querySelector("meta[name=csrf-token").getAttribute("content"),changedTask:this.task,changedPriority:this.priority,changedTheme:this.theme}},methods:{changeTaskText(t){this.changedTask=t.target.value},changePriority(t){this.changedPriority=t.target.value},changeTheme(){this.changedTheme=event.target.value},hideModal(){this.$parent.visibleModalChange=!1},changeTask(){let t="task="+this.changedTask+"&priority="+this.changedPriority+"&id="+this.id+"&theme="+this.changedTheme;try{fetch("changeTask",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded","X-CSRF-TOKEN":this.token}),body:t}).then((t=>t.json())).then((t=>{if(null!=t?.errors)return alert(t.errors?.task),!1;location.reload()}))}catch(e){console.log(e)}}}},S=C,_=(0,d.Z)(S,y,w,!1,null,"0e29a724",null),x=_.exports,L={name:"TaskItem",components:{TaskActionButton:b,TaskEditModal:x},props:["task","priority","type","date","id","theme"],data(){return{visibleTask:!0,visibleModalChange:!1,currentRoute:window.location.href.split("/")[3],token:document.querySelector("meta[name=csrf-token").getAttribute("content")}},methods:{recoverTask(){let t="id="+this.id;try{fetch("recoverTask",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded","X-CSRF-TOKEN":this.token}),body:t}).then((t=>t.json())).then((t=>{if(null!=t?.errors)return alert(t.errors?.task),!1;0!=t.length&&0!=t&&null!=t||alert("Эту запись нельзя восстановить"),location.reload()}))}catch(e){console.log(e)}}}},O=L,I=(0,d.Z)(O,p,k,!1,null,"13d1299d",null),P=I.exports,$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-mask",attrs:{tabindex:"-1"}},[e("div",{staticClass:"modal-wrapper text-white"},[t._m(0),e("div",{staticClass:"modal-body"},[e("center",[e("div",{staticClass:"spinner-border text-warning",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[t._v("Loading...")])])])],1)])])},A=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Загрузка")])])}],M={name:"LoadingSpinner"},j=M,N=(0,d.Z)(j,$,A,!1,null,"1b680d54",null),R=N.exports,B={name:"App",components:{TaskInput:u,TaskItem:P,LoadingSpinner:R},data(){return{tasks:[],currentRoute:window.location.href.split("/")[3],suggestionsThemes:[],showLoadingSpinner:!1}},methods:{loadTasks(t){let e="/get_tasks";e+="?type="+t,this.type=t;var a=this;a.showLoadingSpinner=!0;try{fetch(e).then((t=>t.json())).then((t=>{a.showLoadingSpinner=!1,this.tasks=[];for(let e=0;e<t.length;e++){let a={};a.id=t[e].id,a.date=t[e].dt_task,a.task=t[e].task,a.priority=t[e].priority,a.type=this.type,a.theme=t[e].theme,this.tasks.push(a)}}))}catch(s){a.showLoadingSpinner=!1,console.log(s)}},getTasksThemes(){var t=this;fetch("get_tasks_themes",{method:"GET"}).then((t=>t.json())).then((e=>{t.suggestionsThemes=e}))}},mounted(){if("demo"==this.currentRoute){if(localStorage.getItem("tasks"))try{this.tasks=JSON.parse(localStorage.getItem("tasks"))}catch(t){localStorage.removeItem("tasks")}}else{let t=0;"done"==this.currentRoute?t=1:"bookmarks"==this.currentRoute?t=3:"archive"==this.currentRoute&&(t=2),this.loadTasks(t),this.getTasksThemes()}},flag_rewrite:!1},D=B,F=(0,d.Z)(D,i,n,!1,null,null,null),E=F.exports;s.ZP.config.productionTip=!1,new s.ZP({render:t=>t(E)}).$mount("#app")}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,s,i,n){if(!s){var o=1/0;for(d=0;d<t.length;d++){s=t[d][0],i=t[d][1],n=t[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(r=!1,n<o&&(o=n));if(r){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,i,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,n,o=s[0],r=s[1],l=s[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var d=l(a)}for(e&&e(s);c<o.length;c++)n=o[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(d)},s=self["webpackChunkvue_front"]=self["webpackChunkvue_front"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(8018)}));s=a.O(s)})();
//# sourceMappingURL=app.js.map