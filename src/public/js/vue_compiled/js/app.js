(function(){"use strict";var t={4481:function(t,e,a){var n=a(6369),s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row justify-content-center bg-dark-theme",attrs:{id:"app"}},[e("div",{staticClass:"col-md-7 bg-dark-theme"},[t.showInput?e("TaskInput",{attrs:{currentRoute:t.currentRoute},on:{callShowLoadingSpinner:t.callShowLoadingSpinner,callPushTask:t.callPushTask}}):t._e(),e("div",{staticClass:"p-2"},[e("ul",{staticClass:"list-group list-group-flush",attrs:{id:"task-list"}},t._l(t.tasks,(function(a){return e("li",{key:a.id,staticClass:"list-group-item list-group-item-darktheme border border-dark"},[e("TaskItem",{attrs:{task:a.task,type:a.type,date:a.date,id:a.id},on:{callShowLoadingSpinner:t.callShowLoadingSpinner}})],1)})),0)]),e("LoadingSpinner",{directives:[{name:"show",rawName:"v-show",value:t.showLoadingSpinner,expression:"showLoadingSpinner"}]})],1)])},o=[],i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-2 bg-dark-theme",attrs:{id:"task-input"}},[e("span",{staticClass:"text-white",staticStyle:{"font-size":"small"},attrs:{id:"count_new_task"}},[t._v("0/2100")]),e("textarea",{staticClass:"form-control bg-dark-theme",attrs:{type:"text",name:"newTask",id:"newTask",placeholder:"Text",size:"100",maxlength:"2100"},domProps:{value:t.task},on:{input:function(e){t.inputTask(e),t.autoHeight(e)},blur:t.autoHeight,focus:t.autoHeight}}),e("div",{staticClass:"d-flex justify-content-center mt-1"},[e("button",{staticClass:"btn btn-secondary btn-lg rounded-circle",attrs:{id:"add_task_btn",type:"button"},on:{click:function(e){return t.addTask()}}},[e("i",{staticClass:"fa fa-plus"})])])])},r=[],l={methods:{getDateTime(){let t=new Date,e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear(),s=t.getHours(),o=t.getMinutes(),i=t.getSeconds();return e+"-"+a+"-"+n+" "+s+":"+o+":"+i}}},c={methods:{getTasksFromLocalStorage(){let t=localStorage.getItem("tasks");if(null==t)t=[];else try{t=JSON.parse(t)}catch(e){t=[]}return t}}},h={name:"TaskInput",mixins:[l,c],props:["currentRoute"],data(){return{task:"",date:"",token:document.querySelector("meta[name=csrf-token").getAttribute("content")}},methods:{inputTask(t){this.task=t.target.value,document.getElementById("count_new_task").textContent=t.target.value.length+"/2100"},addTask(){if(this.date=this.getDateTime(),"/demo"==this.currentRoute)this.saveTaskToLocalStorage();else{let t=0;"/bookmarks"==this.currentRoute&&(t=3);let e={task:this.task,date:this.date,type:t};this.saveTaskOnServer(e)}this.cleanInput()},saveTaskToLocalStorage(){let t=this.getTasksFromLocalStorage(),e={id:t.length+1+this.date,task:this.task,date:this.date};t.push(e),t=JSON.stringify(t),localStorage.setItem("tasks",t),this.callPushTask(e)},saveTaskOnServer(t){this.callShowLoadingSpinner(!0);let e=this;try{fetch("/tasks",{method:"POST",headers:new Headers({"Content-Type":"application/json","X-CSRF-TOKEN":this.token}),body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{if(e.callShowLoadingSpinner(!1),null!=t?.errors)return alert(t.errors?.task),!1;null==t.id?alert("Количество задач в этом списке стало равным 50. Это количество нельзя превышать, займись делом."):e.callPushTask(t)}))}catch(a){console.log(a),e.callShowLoadingSpinner(!1)}},cleanInput(){this.task="",this.date="",document.getElementById("newTask").style.height="60px",document.getElementById("count_new_task").textContent="0/2100"},autoHeight(t){t.target.style.height="60px",t.target.style.height=t.target.scrollHeight+"px"},callShowLoadingSpinner(t){this.$emit("callShowLoadingSpinner",t)},callPushTask(t){this.$emit("callPushTask",t)}}},u=h,d=a(1001),p=(0,d.Z)(u,i,r,!1,null,null,null),k=p.exports,m=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:t.id}},[e("div",[e("div",{staticClass:"text-white mb-3 row"},[e("div",{staticClass:"col-2"},[e("em",{staticStyle:{"font-size":"small"}},[t._v(t._s(t.date))])]),e("div",{staticClass:"col-10"},["/demo"==t.currentRoute?e("div",{staticClass:"text-white d-flex flex-row pull-right"},[e("TaskActionButton",{attrs:{buttonIcon:"fa fa-check-square",buttonClass:"pull-right btn btn-outline-success btn-sm w-100",action:"removeTaskFromLocal",idTask:t.id,changedTask:t.task,type:t.type},on:{callRemoveTaskElement:t.callRemoveTaskElement}})],1):e("div",{staticClass:"text-white d-flex flex-row pull-right"},["/done"!=t.currentRoute?e("TaskActionButton",{attrs:{buttonIcon:"fa fa-check-square",buttonClass:"pull-right btn btn-outline-success btn-sm w-100",action:"swapTaskToDone",idTask:t.id,changedTask:t.task,type:t.type},on:{callShowLoadingSpinner:t.callShowLoadingSpinner,callRemoveTaskElement:t.callRemoveTaskElement}}):e("TaskActionButton",{attrs:{buttonIcon:"fa fa-trash",buttonClass:"pull-right btn btn-outline-danger btn-sm w-100",action:"deleteTask",idTask:t.id,changedTask:t.task,type:t.type},on:{callShowLoadingSpinner:t.callShowLoadingSpinner,callRemoveTaskElement:t.callRemoveTaskElement}}),e("TaskActionButton",{attrs:{buttonIcon:"fa fa-location-arrow",buttonClass:"pull-right btn btn-outline-success btn-sm w-100",action:"swapTaskToTasks",idTask:t.id,changedTask:t.task,type:t.type},on:{callShowLoadingSpinner:t.callShowLoadingSpinner,callRemoveTaskElement:t.callRemoveTaskElement}}),e("TaskActionButton",{attrs:{buttonIcon:"fa fa-bookmark",buttonClass:"pull-right btn btn-outline-primary btn-sm w-100",action:"swapTaskToBookmarks",idTask:t.id,changedTask:t.task,type:t.type},on:{callShowLoadingSpinner:t.callShowLoadingSpinner,callRemoveTaskElement:t.callRemoveTaskElement}}),e("TaskActionButton",{attrs:{buttonIcon:"fa fa-archive",buttonClass:"pull-right btn btn-outline-info btn-sm w-100",action:"swapTaskToArchive",idTask:t.id,changedTask:t.task,type:t.type},on:{callShowLoadingSpinner:t.callShowLoadingSpinner,callRemoveTaskElement:t.callRemoveTaskElement}})],1),e("div",{staticClass:"text-white d-flex flex-row pull-right me-2"},[e("button",{staticClass:"btn btn-outline-light btn-sm",attrs:{type:"button"},on:{click:function(e){t.visibleTask=!t.visibleTask}}},[t.visibleTask?e("i",{staticClass:"fa fa-eye-slash",attrs:{"aria-hidden":"true"}}):e("i",{staticClass:"fa fa-eye",attrs:{"aria-hidden":"true"}})])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleTask,expression:"visibleTask"}],staticClass:"text-white mb-2"},[e("span",{staticClass:"text-white",staticStyle:{"font-size":"small"},attrs:{id:"count_task_"+t.id}},[t._v(t._s(t.currentSymbolsTask)+"/2100")]),e("textarea",{staticClass:"form-control bg-dark-theme",attrs:{type:"text",id:"task_"+t.id,placeholder:"Задача",size:"100",maxlength:"2100",readonly:t.readonlyInput},domProps:{value:t.task},on:{input:function(e){t.inputTask(e),t.autoHeight(e)},blur:t.autoHeight,focus:t.autoHeight}}),e("button",{directives:[{name:"show",rawName:"v-show",value:t.showSaveBtn,expression:"showSaveBtn"}],staticClass:"btn btn-success btn-sm",on:{click:t.updateTask}},[t._v("save")])])])])},g=[],T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"me-2"},[e("button",{class:t.buttonClass,attrs:{id:t.idTask},on:{click:t.taskBtnAction}},[e("i",{class:t.buttonIcon})])])},S=[],f={name:"TaskActionButton",props:["buttonClass","buttonIcon","action","idTask","changedTask","type"],mixins:[l,c],data(){return{token:document.querySelector("meta[name=csrf-token").getAttribute("content")}},methods:{taskBtnAction(){"removeTaskFromLocal"==this.action?this.removeTaskFromLocal():"deleteTask"==this.action?this.deleteTask():"swapTaskToTasks"==this.action?this.taskSwapType(0):"swapTaskToDone"==this.action?this.taskSwapType(1):"swapTaskToArchive"==this.action?this.taskSwapType(2):"swapTaskToBookmarks"==this.action&&this.taskSwapType(3)},removeTaskFromLocal(){let t=this.getTasksFromLocalStorage(),e=[];for(let a=0;a<t.length;a++)t[a].id!=this.idTask&&e.push(t[a]);t=JSON.stringify(e),localStorage.setItem("tasks",t),this.$emit("callRemoveTaskElement")},taskSwapType(t){let e=this;this.callShowLoadingSpinner(!0);let a=this.getDateTime(),n={id:this.idTask,task:this.changedTask,date:a,type:t};try{fetch("tasks",{method:"PUT",headers:new Headers({"Content-Type":"application/json","X-CSRF-TOKEN":this.token}),body:JSON.stringify(n)}).then((t=>t.json())).then((t=>{if(e.callShowLoadingSpinner(!1),null!=t?.errors)return alert(t.errors?.task),!1;e.$emit("callRemoveTaskElement")}))}catch(s){console.log(s),e.callShowLoadingSpinner(!1)}},deleteTask(){let t=this;this.callShowLoadingSpinner(!0);let e={id:this.idTask};try{fetch("/tasks",{method:"DELETE",headers:new Headers({"Content-Type":"application/json","X-CSRF-TOKEN":this.token}),body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{if(t.callShowLoadingSpinner(!1),null!=e?.errors)return alert(e.errors?.task),!1;t.$emit("callRemoveTaskElement")}))}catch(a){console.log(a),t.callShowLoadingSpinner(!1)}},callShowLoadingSpinner(t){this.$emit("callShowLoadingSpinner",t)}}},w=f,v=(0,d.Z)(w,T,S,!1,null,null,null),b=v.exports,y={name:"TaskItem",components:{TaskActionButton:b},mixins:[l],props:["task","type","date","id"],data(){return{visibleTask:!0,currentRoute:window.location.pathname,token:document.querySelector("meta[name=csrf-token").getAttribute("content"),currentSymbolsTask:0,maxSymbolsTask:2100,readonlyInput:!1,showSaveBtn:!1}},methods:{inputTask(t){this.task=t.target.value,this.currentSymbolsTask=t.target.value.length,this.showSaveBtn=!0},getCurrentSymbolsInInput(){this.currentSymbolsTask=this.task.length},autoHeight(t){t.target.style.height="60px",t.target.style.height=t.target.scrollHeight+"px"},updateTask(){this.showSaveBtn=!1,this.date=this.getDateTime();try{fetch("/tasks",{method:"PUT",headers:new Headers({"Content-Type":"application/json","X-CSRF-TOKEN":this.token}),body:JSON.stringify(this.$props)}).then((t=>t.json())).then((t=>{null!=t?.errors&&alert(t.errors)}))}catch(t){console.log(t)}},callShowLoadingSpinner(t){this.$emit("callShowLoadingSpinner",t)},callRemoveTaskElement(){this.$el.parentNode.parentNode.removeChild(this.$el.parentNode)}},mounted(){this.getCurrentSymbolsInInput(),"/demo"==window.location.pathname&&"newTask"!=this.inputId&&(this.readonlyInput=!0)}},C=y,L=(0,d.Z)(C,m,g,!1,null,null,null),x=L.exports,_=function(){var t=this;t._self._c;return t._m(0)},I=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-mask",attrs:{tabindex:"-1"}},[e("div",{staticClass:"modal-wrapper"},[e("div",{staticClass:"spinner-border text-warning",attrs:{role:"status"}})])])}],R={name:"LoadingSpinner"},E=R,O=(0,d.Z)(E,_,I,!1,null,"b8b00eb2",null),B=O.exports;const j={"/":0,"/home":0,"/done":1,"/archive":2,"/bookmarks":3};var N={name:"App",components:{TaskInput:k,TaskItem:x,LoadingSpinner:B},mixins:[c],data(){return{tasks:[],currentRoute:window.location.pathname,showLoadingSpinner:!1,showInput:!0}},methods:{loadTasks(t){let e="/tasks?type="+t,a=this;a.showLoadingSpinner=!0;try{fetch(e).then((t=>t.json())).then((e=>{a.showLoadingSpinner=!1;for(let a=0;a<e.length;a++){let n={};n.id=e[a].id,n.date=e[a].dt_task,n.task=e[a].task,n.type=t,this.tasks.push(n)}}))}catch(n){a.showLoadingSpinner=!1,console.log(n)}},callShowLoadingSpinner(t){this.showLoadingSpinner=t},callPushTask(t){this.tasks.push(t)}},mounted(){if("/demo"==this.currentRoute){let t=this.getTasksFromLocalStorage();this.tasks=t}else this.loadTasks(j[this.currentRoute]);this.showInput="/done"!=this.currentRoute&&"/archive"!=this.currentRoute}},A=N,P=(0,d.Z)(A,s,o,!1,null,null,null),H=P.exports;n.ZP.config.productionTip=!1,new n.ZP({render:t=>t(H)}).$mount("#app")}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,n,s,o){if(!n){var i=1/0;for(h=0;h<t.length;h++){n=t[h][0],s=t[h][1],o=t[h][2];for(var r=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(r=!1,o<i&&(i=o));if(r){t.splice(h--,1);var c=s();void 0!==c&&(e=c)}}return e}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[n,s,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,o,i=n[0],r=n[1],l=n[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var h=l(a)}for(e&&e(n);c<i.length;c++)o=i[c],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(h)},n=self["webpackChunkvue_front"]=self["webpackChunkvue_front"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(4481)}));n=a.O(n)})();
//# sourceMappingURL=app.js.map